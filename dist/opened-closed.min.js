"use strict";var OpenedClosed=function(){function t(e){if(null==e||e.constructor!==Object)throw new Error(t.ERR_OPTIONS_NOT_OBJECT);if(0===Object.keys(e).length)throw new Error(t.ERR_OPTIONS_EMPTY);if("timezone"in e==!1)throw new Error(t.ERR_OPTIONS_MISSING_TIMEZONE);this.options=e,this.now=new Date,this._autoFillLanguage()}return t.prototype.opened=function(){var t=!1,e=this._now();for(var n in this.options.openings){var r=this.options.openings[n];if(!0===this._nowIsTheDay(n))for(var o=0,i=r;o<i.length;o++){var a=i[o],s=this._getDateFromString(a.start,n),_=this._getDateFromString(a.end,n);if(s<=e&&e<=_){t=!0;break}}}return t},t.prototype.availability=function(){var t=this.options.language.closed;return!0===this.opened()&&(t=this.options.language.opened),t},t.prototype.closeIn=function(){var t=[],e=this._now();for(var n in this.options.openings){var r=this.options.openings[n];if(!0===this._nowIsTheDay(n))for(var o=0,i=r;o<i.length;o++){var a=i[o],s=this._getDateFromString(a.start,n),_=this._getDateFromString(a.end,n);if(s<=e&&e<=_){var E=this._datesDifferenceToEpoch(e,_);t.push(E);break}}}return this._max(t)},t.prototype._currentYear=function(){return this.now.getFullYear()},t.prototype._currentMonth=function(){return this.now.getMonth()+1},t.prototype._currentDay=function(){return this.now.getDate()},t.prototype._dayNow=function(){return this.now.getDay()},t.prototype._now=function(){return new Date},t.prototype._currentDate=function(t){return t.year+"-"+t.month+"-"+t.day+" "+t.time+" "+this.options.timezone},t.prototype._getDateFromString=function(t,e){var n=this._currentYear(),r=this._currentMonth(),o=this._currentDay(),i=this._currentDate({year:n,month:r,day:o,time:t});return new Date(i)},t.prototype._dayNumberFromString=function(e){var n=0;switch(e){case"sunday":n=0;break;case"monday":n=1;break;case"tuesday":n=2;break;case"wednesday":n=3;break;case"thursday":n=4;break;case"friday":n=5;break;case"saturday":n=6;break;default:throw new Error(t.ERR_UNSUPPORTED_DAY)}return n},t.prototype._nowIsTheDay=function(t){var e=this._dayNumberFromString(t);return this._dayNow()===e},t.prototype._autoFillLanguage=function(){"language"in this.options==!1&&(this.options.language={opened:"opened",closed:"closed"});var e=this.options.language;if(null==e||e.constructor!==Object)throw new Error(t.ERR_OPTIONS_LANGUAGE_NOT_OBJECT);"opened"in this.options.language==!1&&(this.options.language.opened=t.DEFAULT_LANGUAGE_OPENED);var n=this.options.language.opened;if(null==n||n.constructor!==String)throw new Error(t.ERR_OPTIONS_LANGUAGE_OPENED_NOT_STRING);if(0===n.trim().length)throw new Error(t.ERR_OPTIONS_LANGUAGE_OPENED_EMPTY);"closed"in this.options.language==!1&&(this.options.language.closed=t.DEFAULT_LANGUAGE_CLOSED);var r=this.options.language.closed;if(null==r||r.constructor!==String)throw new Error(t.ERR_OPTIONS_LANGUAGE_CLOSED_NOT_STRING);if(0===r.trim().length)throw new Error(t.ERR_OPTIONS_LANGUAGE_CLOSED_EMPTY)},t.prototype._dateToEpoch=function(e){if(null==e||e.constructor!==Date)throw new Error(t.ERR_INTERNAL_NOT_DATE);var n=e.getTime()/1e3;return n=parseInt(n.toString())},t.prototype._datesDifferenceToEpoch=function(t,e){var n=this._dateToEpoch(t);return this._dateToEpoch(e)-n},t.prototype._max=function(e){if(null==e||e.constructor!==Array)throw new Error(t.ERR_INTERNAL_NOT_ARRAY);return 0===e.length?0:Math.max.apply(Math,e)},t.ERR_OPTIONS_NOT_OBJECT="expected parameter 1 to be an object",t.ERR_OPTIONS_EMPTY="options is empty",t.ERR_OPTIONS_MISSING_TIMEZONE="options is missing timezone",t.ERR_OPTIONS_LANGUAGE_NOT_OBJECT="language options should be an object",t.ERR_OPTIONS_LANGUAGE_OPENED_NOT_STRING="opened language is string",t.ERR_OPTIONS_LANGUAGE_OPENED_EMPTY="opened language is empty",t.ERR_OPTIONS_LANGUAGE_CLOSED_NOT_STRING="closed language is string",t.ERR_OPTIONS_LANGUAGE_CLOSED_EMPTY="closed language is empty",t.ERR_UNSUPPORTED_DAY="unsupported day",t.ERR_INTERNAL_NOT_DATE="internal error: invalid date",t.ERR_INTERNAL_NOT_ARRAY="internal error: invalid array",t.DEFAULT_LANGUAGE_CLOSED="closed",t.DEFAULT_LANGUAGE_OPENED="opened",t}();